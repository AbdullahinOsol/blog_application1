{% extends "new_base.html" %}

{% block content %}
<body class="h-full">

    <!-- Card Container -->
    <div class="flex min-h-full flex-col justify-center px-4 py-6 sm:px-6 lg:px-8 sm:py-12">
      <!-- Outer card with background and shadow -->
      <div class="bg-white shadow-md rounded-lg p-8 w-full max-w-xl mx-auto">
        
        <!-- Header: Logo and Title -->
        <div class="sm:mx-auto sm:w-full sm:max-w-sm">
          <h2 class="text-center text-2xl font-bold leading-9 tracking-tight text-[#3C75B1]">Update Password</h2>
          <p class="text-center mt-2 text-gray-600">Enter and confirm your new password.</p>
        </div>

        <!-- Form Container -->
        <div class="mt-6 sm:mx-auto sm:w-full sm:max-w-sm">
          <form method="POST" action="{{ url_for('auth.reset_password', token=token) }}">
            {{ form.hidden_tag() }}

            <!-- New Password Field -->
            <div class="mb-4">
              {{ form.password.label(class_="block text-sm font-medium text-gray-700 mb-2") }}
              <div class="relative">
                {{ form.password(
                  class_="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",
                  placeholder="●●●●●●●●",
                  onfocus="this.setAttribute('placeholder', '')",
                  onblur="this.setAttribute('placeholder', '●●●●●●●●')",
                  id="password"
                ) }}
                <span onclick="togglePassword('password')" class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400">
                  <i class="fas fa-eye"></i>
                </span>
              </div>
              {% if form.password.errors %}
                <p class="mt-2 text-sm text-red-600">{{ form.password.errors[0] }}</p>
              {% endif %}
            </div>

            <!-- Confirm Password Field -->
            <div class="mb-4">
              {{ form.password2.label(class_="block text-sm font-medium text-gray-700 mb-2") }}
              <div class="relative">
                {{ form.password2(
                  class_="block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 pl-2",
                  placeholder="●●●●●●●●",
                  onfocus="this.setAttribute('placeholder', '')",
                  onblur="this.setAttribute('placeholder', '●●●●●●●●')",
                  id="password2"
                ) }}
                <span onclick="togglePassword('password2')" class="absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer text-gray-400">
                  <i class="fas fa-eye"></i>
                </span>
              </div>
              {% if form.password2.errors %}
                <p class="mt-2 text-sm text-red-600">{{ form.password2.errors[0] }}</p>
              {% endif %}
            </div>

            <!-- Submit Button -->
            <div class="mt-6 flex justify-end">
                {{ form.submit(class_="bg-[#225993] text-white px-3 py-1.5 rounded hover:bg-[#1B487A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#3C75B1]") }}
              </div>              
          </form>
        </div>
      </div> <!-- End of card div -->
    </div>

    <script>
      function togglePassword(id) {
        var field = document.getElementById(id);
        var icon = field.nextElementSibling.querySelector("i");
        if (field.type === "password") {
          field.type = "text";
          icon.classList.remove("fa-eye");
          icon.classList.add("fa-eye-slash");
        } else {
          field.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
        }
      }
    </script>

  </body>
</html>
{% endblock %}
